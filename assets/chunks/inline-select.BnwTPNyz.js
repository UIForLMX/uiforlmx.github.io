import{f as y}from"./theme.BpoAkWos.js";import{d as C,r as d,j as D,u as i,c as r,W as h}from"./framework.BcJo4Wom.js";const F=C({name:"InlineSelect",props:{data:{type:Object,default:()=>({})},name:{type:String,default:""},options:{type:Array,default:()=>[]},allowEmpty:{type:Boolean,default:!1}},emits:["updateValue"],setup(l,{emit:p,attrs:a}){const f=d(),o=d((a==null?void 0:a.mode)==="multiple"?[]:""),s=d(!1),m=e=>{let n=e;const u=i(l.options).find(c=>Object.prototype.hasOwnProperty.call(c,"realValue")&&c.realValue===e);return u&&(n=u.value),n};o.value=m(l.data[l.name])===null?void 0:m(l.data[l.name]);const v=D(()=>{const e=i(l.options);return l.allowEmpty?[{value:"",label:""},...e]:e}),V=e=>{let n=e;const u=i(l.options).find(c=>c.value===e&&Object.prototype.hasOwnProperty.call(c,"realValue"));return u&&(n=u.realValue),n},b=e=>{p("updateValue",l.data.id,l.name,V(e))},j=e=>{e.stopPropagation()},w=e=>{e.stopPropagation()},O=e=>{e.stopPropagation()},g=()=>{s.value=!1,p("updateValue",l.data.id,l.name,o.value)},x=()=>{s.value=!0},P=()=>{var e,n,t;!s.value&&((e=o.value)==null?void 0:e.length)===0?g():(t=(n=f.value)==null?void 0:n.focus)==null||t.call(n)};return()=>{var e,n;return r("div",{onKeydown:w,onMousedown:O,onDblclick:j},[(a==null?void 0:a.mode)==="multiple"?r(y,h({ref:f,class:["inline-select",((e=l.data)==null?void 0:e.type)==="project"&&"inline-select-project"],value:o.value,"onUpdate:value":t=>o.value=t,maxTagCount:1,"max-tag-text-length":6,bordered:!1,options:v.value},a,{onBlur:g,onFocus:x,onDeselect:P}),null):r(y,h({class:["inline-select",((n=l.data)==null?void 0:n.type)==="project"&&"inline-select-project"],value:o.value,"onUpdate:value":t=>o.value=t,"max-tag-text-length":8,bordered:!1,options:v.value},a,{onChange:b}),null)])}}});export{F as default};
