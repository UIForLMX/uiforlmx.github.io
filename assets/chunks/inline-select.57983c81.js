import{d as P,f as d,h as B,e as i,C as r,B as h}from"./framework.3b97cefe.js";import{o as y}from"../app.c2288951.js";import"./theme.e4c10142.js";const E=P({name:"InlineSelect",props:{data:{type:Object,default:()=>({})},name:{type:String,default:""},options:{type:Array,default:()=>[]},allowEmpty:{type:Boolean,default:!1}},emits:["updateValue"],setup(l,{emit:p,expose:D,attrs:a}){const f=d(),o=d((a==null?void 0:a.mode)==="multiple"?[]:""),c=d(!1),m=e=>{let n=e;const u=i(l.options).find(s=>Object.prototype.hasOwnProperty.call(s,"realValue")&&s.realValue===e);return u&&(n=u.value),n};o.value=m(l.data[l.name])===null?void 0:m(l.data[l.name]);const v=B(()=>{const e=i(l.options);return l.allowEmpty?[{value:"",label:""},...e]:e}),V=e=>{let n=e;const u=i(l.options).find(s=>s.value===e&&Object.prototype.hasOwnProperty.call(s,"realValue"));return u&&(n=u.realValue),n},b=e=>{p("updateValue",l.data.id,l.name,V(e))},w=e=>{e.stopPropagation()},j=e=>{e.stopPropagation()},x=e=>{e.stopPropagation()},g=()=>{c.value=!1,p("updateValue",l.data.id,l.name,o.value)},O=()=>{c.value=!0},C=()=>{var e,n,t;!c.value&&((e=o.value)==null?void 0:e.length)===0?g():(t=(n=f.value)==null?void 0:n.focus)==null||t.call(n)};return()=>{var e,n;return r("div",{onKeydown:j,onMousedown:x,onDblclick:w},[(a==null?void 0:a.mode)==="multiple"?r(y,h({ref:f,class:["inline-select",((e=l.data)==null?void 0:e.type)==="project"&&"inline-select-project"],value:o.value,"onUpdate:value":t=>o.value=t,maxTagCount:1,"max-tag-text-length":6,bordered:!1,options:v.value},a,{onBlur:g,onFocus:O,onDeselect:C}),null):r(y,h({class:["inline-select",((n=l.data)==null?void 0:n.type)==="project"&&"inline-select-project"],value:o.value,"onUpdate:value":t=>o.value=t,"max-tag-text-length":8,bordered:!1,options:v.value},a,{onChange:b}),null)])}}});export{E as default};
