import{U as re,V as oe,u as _,k as x,l as g,N as T,q as A,o as M,P as se,M as V,K as ae,L as z,D as Y,e as I,w as ie,W as G,X as ce,s as L,p as O,f as de,Y as ne,n as H,S as B}from"../app.19977dc1.js";import{d as D,ac as le,C as t,a0 as Q,f as v,a3 as U,h as pe,w as X,a as J,O as ue}from"./framework.3b97cefe.js";import{c as P,n as W,b as q,T as y}from"./base-gantt.51131bbb.js";var we="[object Boolean]";function Te(e){return e===!0||e===!1||re(e)&&oe(e)==we}const be=Symbol("editorGanttInstance"),ve=Symbol("projectId"),Ce=Symbol("baseConfig"),ye=Symbol("userLang"),Se=Symbol("bizType"),ge={"project.wbsEditor.duration":"duration","project.wbsEditor.projectStartDate":"start date","project.wbsEditor.projectEndDate":"end date","project.wbsEditor.delete":"Delete","project.wbsEditor.confirm":"Confirm","project.wbsEditor.cancel":"Cancel","project.wbsEditor.updateProgress":"update progress","project.wbsEditor.queryFailTip":"Failed to get operation button!","project.wbsEditor.noDataSaveTip":"No different data, please operate first","project.wbsEditor.dataInSaving":"Data is being saved","project.wbsEditor.saveSuccess":"Save successfully","project.wbsEditor.save":"Save","project.wbsEditor.noData":"No Data","project.wbsEditor.saving":"Saving, do not save again","project.wbsEditor.pasting":"Pasting, do not paste again","project.wbsEditor.selectDeleteDataTip":"Please select the data to be deleted first!","project.wbsEditor.deleteRootTip":"Root task is not allowed to be deleted!","project.wbsEditor.cannotDeleteTip":"Task is not allowed to be deleted!","project.wbsEditor.deleteTask":"Delete task","project.wbsEditor.confirmDeleteTip":"Are you sure to delete the selected task?","project.wbsEditor.newTask":"New task","project.wbsEditor.selectOneDataFirst":"Please select one data first","project.wbsEditor.selectSingleTip":"Please select a single data","project.wbsEditor.selectTwoMinTip":"Please select at least two tasks first!","project.wbsEditor.selectSingleTaskTip":"Please select a single task to insert","project.wbsEditor.cannotInsertBeforeRoot":"Tasks cannot be inserted before the root node","project.wbsEditor.progressStatusDeleteTip":'The task progress of the current task or subtask is>0% and the status is not "New", deletion is not allowed!',"project.wbsEditor.columnSaveSuccess":"Column configuration save Success","project.wbsEditor.columnSaveFail":"Column configuration save failed!","project.wbsEditor.searchParamsCannotEmpty":"Search condition cannot be empty","project.wbsEditor.noMatchingContent":"No matching content","project.wbsEditor.taskNameCannotEmpty":"Task name cannot be empty","project.wbsEditor.replaceNum":"{replaceNum} items replaced in total","project.wbsEditor.noItemToReplace":"No item to replace","project.wbsEditor.calendarChangedTip":"Calendar has changed, save it in time","project.wbsEditor.more":"More","project.wbsEditor.WBSEditor":"WBS editor","project.wbsEditor.tip":"Tip","project.wbsEditor.add":"Add","project.wbsEditor.refresh":"refresh plan","project.wbsEditor.querying":"Data is being requested, please refresh later","project.wbsEditor.max":"Maximize","project.wbsEditor.min":"Minimize","project.wbsEditor.todayLine":"Today Line","project.wbsEditor.remove":"Remove","project.wbsEditor.increase":"Increase","project.wbsEditor.closeTip":"There is unsaved data, are you sure to close?","project.wbsEditor.cannotDelTip":"Task {task} is not allowed to be deleted","project.wbsEditor.asap":"As soon as possible","project.wbsEditor.alap":"As late as possible","project.wbsEditor.mso":"Must start on","project.wbsEditor.mfo":"Must finish on","project.wbsEditor.snet":"Not earlier than ... start","project.wbsEditor.fnet":"Not earlier than ... finish","project.wbsEditor.snlt":"Not later than ... start","project.wbsEditor.fnlt":"Not later than ... finish","project.wbsEditor.fineTuning":"FineTuning Mode","project.wbsEditor.edit":"Edit Mode","project.wbsEditor.decomposing":"Decomposing Mode","project.wbsEditor.canNotEdit":"Editing is not allowed for tasks under review or completed","project.wbsEditor.canNotUpdate":"Editing is not allowed for tasks in review or completed","project.wbsEditor.jumpCanNotUpdate":"Editing is not allowed for tasks that are under review or have been completed, and has been automatically skipped","project.wbsEditor.mustSelectHR":"New tasks under fine-tuning plans must have human resources","project.wbsEditor.fineTuningTaskStatusTip":"Under fine-tuning, the current operation cannot select tasks that have been submitted or completed","project.wbsEditor.readOnlyTaskStatusTip":"Task 【{text}】 is a read-only task. Please cancel this task before proceeding with the relevant operations","project.wbsEditor.readOnlyNotEdit":"Task 【{text}】 is read-only and related operations are not allowed","project.wbsEditor.pause":"Pause","project.wbsEditor.terminated":"Terminated","project.wbsEditor.reported":"Reported","project.wbsEditor.finished":"Finished","project.wbsEditor.inPause":"In pause","project.wbsEditor.taskName":"Task name","project.wbsEditor.inputTaskName":"Please enter task name","project.wbsEditor.inputDuration":"Please enter duration","project.wbsEditor.taskStatus":"Task status","project.wbsEditor.selectTaskStatus":"Please select task status","project.wbsEditor.criticalPath":"Critical path","project.wbsEditor.isCriticalPath":"Is critical path","project.wbsEditor.milestone":"Milestone","project.wbsEditor.isMilestone":"Is milestone","project.wbsEditor.resourceName":"Resource name","project.wbsEditor.inputResourceName":"Please enter resource name","project.wbsEditor.reset":"Reset","project.wbsEditor.query":"Query","project.wbsEditor.durationCannotNegative":"Duration filter range cannot be negative","project.wbsEditor.yes":"Yes","project.wbsEditor.no":"No","project.wbsEditor.filter":"Filter","project.wbsEditor.filterPlan":"filter plan","project.wbsEditor.input":"Please Input","project.wbsEditor.select":"Please Select","project.wbsEditor.OccupancyRatio":"Occupancy ratio","project.wbsEditor.operation":"Operation","project.wbsEditor.operationConfirm":"Operation confirmation","project.wbsEditor.taskResource":"task resource","project.wbsEditor.taskResource.resourceList":"Task resource list","project.wbsEditor.taskResource.projectRole":"Project role","project.wbsEditor.taskResource.HumanResource":"Human resource","project.wbsEditor.taskResource.EquipmentResource":"Equipment resource","project.wbsEditor.taskResource.MaterialResource":"Material resource","project.wbsEditor.taskResource.resourceRatioTip":"Task resource ratio must be an integer between 1 and 100","project.wbsEditor.taskResource.index":"Index","project.wbsEditor.taskResource.resourceType":"Resource type","project.wbsEditor.taskResource.isMainResource":"Is main resource","project.wbsEditor.taskResource.ResourceTip":"Please fill in the task resource correctly","project.wbsEditor.task.addTask":"Add task","project.wbsEditor.task.editTask":"Edit task","project.wbsEditor.task.SchedulingConflict":"This operation causes the scheduling of the summary task {text} with outline number {wbs} to conflict. The time limit of this summary task makes it conflict with one of its subtasks. Do you want to remove the time limit of the summary task?","project.wbsEditor.task.nameLengthTip":"Task name cannot be more than 60 characters","project.wbsEditor.task.selectStartTime":"Please select start time","project.wbsEditor.task.selectEndTime":"Please select end time","project.wbsEditor.task.timeSelectTip":"End time cannot be earlier than start time","project.wbsEditor.task.inputDuration":"Please fill in duration","project.wbsEditor.task.constraintDate":"Constraint date","project.wbsEditor.task.selectConstraintDate":"Please select constraint date","project.wbsEditor.task.constraintType":"Constraint type","project.wbsEditor.task.selectConstraintType":"Please select constraint type","project.wbsEditor.task.constraintDatevalidateFail":"Constraint date causes task start time to be earlier than project start time","project.wbsEditor.task.baseInfo":"Basic information","project.wbsEditor.task.taskMode":"Task mode","project.wbsEditor.task.predecessor":"predecessors","project.wbsEditor.predecessor.predecessorList":"Predecessor List","project.wbsEditor.task.predecessor.taskName":"task name","project.wbsEditor.task.predecessor.constraintType":"constraint type","project.wbsEditor.task.predecessor.lag":"leg day","project.wbsEditor.task.predecessor.finishToStart":"Finish Start","project.wbsEditor.task.predecessor.startToStart":"Start Start","project.wbsEditor.task.predecessor.finishToFinish":"Finish Finish","project.wbsEditor.task.predecessor.startToFinish":"Start Finish","project.wbsEditor.taskPredecessor.requireTip":"Please  select predecessor name","project.wbsEditor.task.AutoMode":"Auto","project.wbsEditor.task.manualMode":"Manual","project.wbsEditor.task.taskRemark":"Task remark","project.wbsEditor.task.inputTaskRemark":"Please enter task remark","project.wbsEditor.task.taskResource":"Task resource","project.wbsEditor.task.batchDeleteTip":"please delete task resource","project.wbsEditor.setProjectStartTime":"Set project start time","project.wbsEditor.projectStartTime":"Project start time","project.wbsEditor.search.searchContent":"Search content","project.wbsEditor.search.searchContentTip":"Please input search content","project.wbsEditor.search.replaceTo":"Replace to","project.wbsEditor.search.replaceToTip":"Please input replace content","project.wbsEditor.search.searchColumn":"Search column","project.wbsEditor.search.matchCase":"Match case","project.wbsEditor.search.search":"Search","project.wbsEditor.search.replace":"Replace","project.wbsEditor.search.replaceAll":"Replace all","project.wbsEditor.search.cancel":"Cancel","project.wbsEditor.search.prev":"Previous","project.wbsEditor.search.next":"Next","project.wbsEditor.resourceLoad.resourceLoad":"Resource load","project.wbsEditor.resourceLoad.timeRange":"Time range","project.wbsEditor.resourceLoad.resource":"Resource","project.wbsEditor.resourceLoad.selectResource":"Please select resource","project.wbsEditor.resourceLoad.selectResourceTip":"Please enter keywords to search for resources","project.wbsEditor.task.selectPredecessor":"Please enter keywords to search for predecessor","project.wbsEditor.resource.selectResource":"Please enter keywords to search","project.wbsEditor.projectTeam.projectTeam":"Project team","project.wbsEditor.projectTeam.teamList":"Team list","project.wbsEditor.projectTeam.selectUserFirst":"Please select user first","project.wbsEditor.projectTeam.cannotRemoveRole":"Role has been referenced and cannot be removed","project.wbsEditor.projectTeam.cannotRemoveMember":"Member has been referenced and cannot be removed","project.wbsEditor.projectTeam.confirmRemove":"Confirm to remove?","project.wbsEditor.projectTeam.confirmRemoveRoleWithMember":"There are members in this team role, which will be removed together. Do you want to remove it?","project.wbsEditor.projectTeam.confirmRemoveRole":"Do you want to remove this team role?","project.wbsEditor.projectTeam.cannotRemoveBecauseMember":"Members have been assigned tasks and cannot be removed!","project.wbsEditor.projectTeam.addTeamRole":"Add team role","project.wbsEditor.projectTeam.role":"Role","project.wbsEditor.projectTeam.rightRoleDataEmpty":"Right role data is empty!","project.wbsEditor.projectTeam.inputSearchContent":"Please enter search content","project.wbsEditor.projectTeam.item":"Item","project.wbsEditor.projectTeam.waitForSelection":"To be selected","project.wbsEditor.projectTeam.selected":"Selected","project.wbsEditor.periodicTask.addPeriodicTask":"Add Periodic Task","project.wbsEditor.periodicTask.updatePeriodicTask":"Update Periodic Task","project.wbsEditor.periodicTask.week.sunday":"sunday","project.wbsEditor.periodicTask.week.monday":"monday","project.wbsEditor.periodicTask.week.tuesday":"tuesday","project.wbsEditor.periodicTask.week.wednesday":"wednesday","project.wbsEditor.periodicTask.week.thursday":"thursday","project.wbsEditor.periodicTask.week.friday":"friday","project.wbsEditor.periodicTask.week.saturday":"saturday","project.wbsEditor.periodicTask.oneweek":"one week","project.wbsEditor.periodicTask.twoweek":"two week","project.wbsEditor.periodicTask.threeweek":"three week","project.wbsEditor.periodicTask.fourweek":"four week","project.wbsEditor.periodicTask.lastweek":"last week","project.wbsEditor.periodicTask.month.one":"one month","project.wbsEditor.periodicTask.month.two":"two month","project.wbsEditor.periodicTask.month.three":"three month","project.wbsEditor.periodicTask.month.four":"four month","project.wbsEditor.periodicTask.month.five":"five month","project.wbsEditor.periodicTask.month.six":"six month","project.wbsEditor.periodicTask.month.seven":"seven month","project.wbsEditor.periodicTask.month.eight":"eight month","project.wbsEditor.periodicTask.month.nine":"nine month","project.wbsEditor.periodicTask.month.ten":"ten month","project.wbsEditor.periodicTask.month.eleven":"eleven month","project.wbsEditor.periodicTask.month.twelve":"twelve month","project.wbsEditor.periodicTask.order.one":"firts","project.wbsEditor.periodicTask.order.two":"second","project.wbsEditor.periodicTask.order.three":"three","project.wbsEditor.periodicTask.order.four":"four","project.wbsEditor.periodicTask.order.last":"last","project.wbsEditor.periodicTask.selectTime":"select time","project.wbsEditor.periodicTask.day":"every day","project.wbsEditor.periodicTask.week":"every week","project.wbsEditor.periodicTask.month":"every month","project.wbsEditor.periodicTask.year":"every year","project.wbsEditor.workday":"workday","project.wbsEditor.repeat":"repeat","project.wbsEditor.weekLater":"week later","project.wbsEditor.everyMonth":"every month","project.wbsEditor.day":"day","project.wbsEditor.every":"every","project.wbsEditor.at":"at","project.wbsEditor.everyYear":"every year","project.wbsEditor.monthAt":"month at","project.wbsEditor.freeze":"Freeze column","project.wbsEditor.showColumns":"Show configuration column","project.wbsEditor.cannotHiddeAll":"All columns cannot be hidden","project.wbsEditor.menu.ShowAll":"Show all","project.wbsEditor.menu.Import":"Import","project.wbsEditor.menu.ImportTaskTemplate":"Import task template","project.wbsEditor.menu.ImportPlanTemplate":"Import plan template","project.wbsEditor.menu.Resolve":"Resolve","project.wbsEditor.menu.AuthorResolve":"Author resolve","project.wbsEditor.menu.Resolved":"Resolved","project.wbsEditor.menu.Release":"Author release","project.wbsEditor.menu.ResourceLoad":"Resource load","project.wbsEditor.menu.TaskInfo":"Task info","project.wbsEditor.menu.insertTask":"Insert task","project.wbsEditor.menu.insertSubtask":"Insert subtask","project.wbsEditor.menu.MilestoneTask":"Milestone task","project.wbsEditor.menu.PeriodicTask":"Periodic task","project.wbsEditor.menu.Upgrade":"Task upgrade","project.wbsEditor.menu.demotion":"Task demotion","project.wbsEditor.menu.TaskLink":"Task link","project.wbsEditor.menu.CancelLink":"Cancel link ","project.wbsEditor.menu.DeleteTask":"Delete task","project.wbsEditor.menu.TaskAttributes":"Task attributes","project.wbsEditor.menu.Project":"Project","project.wbsEditor.menu.ProjectCalendar":"Project calendar","project.wbsEditor.menu.ProjectTeam":"Project team","project.wbsEditor.menu.ProjectSchedule":"Project schedule","project.wbsEditor.menu.View":"View","project.wbsEditor.menu.showLevelone":"Show level one","project.wbsEditor.menu.showLeveltwo":"Show level two","project.wbsEditor.menu.showLevelthree":"Show level three","project.wbsEditor.menu.collapseAll":"Collapse all","project.wbsEditor.menu.showChart":"Show chart","project.wbsEditor.menu.hideChart":"Hide chart","project.wbsEditor.menu.Zoom":"Zoom","project.wbsEditor.menu.hourZoom":"Hour view","project.wbsEditor.menu.dayZoom":"Day view","project.wbsEditor.menu.weekZoom":"Week view","project.wbsEditor.menu.monthZoom":"Month view","project.wbsEditor.menu.quarterZoom":"Quarter view","project.wbsEditor.menu.yearZoom":"Year view","project.wbsEditor.menu.Copy":"Copy","project.wbsEditor.menu.Cut":"Cut","project.wbsEditor.menu.Undo":"Undo","project.wbsEditor.menu.Paste":"Paste","project.wbsEditor.menu.Restore":"Restore","project.wbsEditor.menu.Search":"Search","project.wbsEditor.menu.Filter":"Filter","project.wbsEditor.menu.showConfig":"Show config","project.wbsEditor.menu.CancelFreezeColumn":"Cancel freeze","project.wbsEditor.menu.FreezeColumn":"Freeze column","project.wbsEditor.menu.logOut":"Logout Edit","project.wbsEditor.menu.fullScreen":"Full Screen","project.wbsEditor.menu.exitFullScreen":"ExitFullScreen","project.wbsEditor.menu.showPath":"Show path","project.wbsEditor.menu.hidePath":"Hide path","project.wbsEditor.menu.InsertOtherTask":"Insert other task","project.wbsEditor.menu.InsertValveTask":"Insert valve task","project.wbsEditor.menu.InstertStageTask":"Insert stage task","project.wbsEditor.menu.InsertPeriodicTask":"Insert periodic task","project.wbsEditor.menu.InsertMilestoneTask":"Insert milestone task","project.wbsEditor.menu.updateResource":"update resource","project.wbsEditor.batchUpdateReource":"Batch update plan resource","project.wbsEditor.menu.About":"About","project.wbsEditor.HR":"Human resource","project.wbsEditor.DR":"Equipment resource","project.wbsEditor.MR":"Material resource","project.wbsEditor.saveFreezeColumn":"fixed this column exceeded view area. continue?","project.wbsEditor.onlyMainResourceTip":"(When there is no master first resource will be taken)","project.wbsEditor.decomposeMode":"Root task not allowed to be edited in decomposition mode","project.wbs.checkProjectStart":"The root task start date  is not same with project start({text}). Please adjust it before saving","project.wbsEditor.fineTuningCanNotMileTask":"Fine tuning mode does not allow changing milestone tasks","project.wbs.checkMileStoneUpdate":"milestone:【{text}】start_date change, before start_date is 【{start}】, not save","project.wbsEditor.parentTaskLinkError":"parent task【{text}】link is  error","project.wbsEditor.parentTaskLinkErrorTip":"Adding will result in non FS and SS of the parent task, Do you want to continue?","project.wbsEditor.decomposeNotEdit":"Root task not allowed to be edited in decomposition mode","project.wbsEditor.task.durationCannotExceed":"The duration cannot exceed 3650 days!","project.wbsEditor.task.endDateCannotExceed":"The duration cannot exceed 3650 days!","project.wbsEditor.circular":"the link【{text}】 is circular, no add"},Re={"project.wbsEditor.duration":"工期","project.wbsEditor.projectStartDate":"开始时间","project.wbsEditor.projectEndDate":"完成时间","project.wbsEditor.delete":"删除","project.wbsEditor.confirm":"确定","project.wbsEditor.cancel":"取消","project.wbsEditor.updateProgress":"更新进度","project.wbsEditor.queryFailTip":"获取操作按钮失败！","project.wbsEditor.noDataSaveTip":"暂无差异化数据, 请先进行操作","project.wbsEditor.dataInSaving":"数据保存中","project.wbsEditor.saveSuccess":"计划数据保存成功","project.wbsEditor.save":"保存","project.wbsEditor.noData":"暂无数据","project.wbsEditor.saving":"数据正在保存中,请不要连续保存","project.wbsEditor.pasting":"数据正在粘贴中，请不要连续粘贴","project.wbsEditor.selectDeleteDataTip":"请先选中要删除的数据!","project.wbsEditor.deleteRootTip":"不允许删除根任务!","project.wbsEditor.cannotDeleteTip":"当前任务为只读任务，不允许删除","project.wbsEditor.progressStatusDeleteTip":'当前任务或子任务的进度大于0且状态不为"新建"，不允许删除!',"project.wbsEditor.deleteTask":"删除任务","project.wbsEditor.confirmDeleteTip":"你确定删除选中的任务吗？","project.wbsEditor.newTask":"新任务","project.wbsEditor.selectOneDataFirst":"请先选中一条数据","project.wbsEditor.selectSingleTip":"请选择单条数据","project.wbsEditor.selectTwoMinTip":"请先选中至少两条任务!","project.wbsEditor.selectSingleTaskTip":"请选择单条任务进行插入","project.wbsEditor.cannotInsertBeforeRoot":"根节点前不能插入任务","project.wbsEditor.columnSaveSuccess":"列配置保存成功","project.wbsEditor.columnSaveFail":"列配置保存失败！","project.wbsEditor.searchParamsCannotEmpty":"查找条件不能为空","project.wbsEditor.noMatchingContent":"无符合条件的内容","project.wbsEditor.taskNameCannotEmpty":"任务名称不能为空","project.wbsEditor.replaceNum":"共替换了{replaceNum}项","project.wbsEditor.noItemToReplace":"无可替换匹配项","project.wbsEditor.calendarChangedTip":"日历已变更,及时保存","project.wbsEditor.more":"更多","project.wbsEditor.WBSEditor":"WBS编辑器","project.wbsEditor.tip":"提示","project.wbsEditor.add":"添加","project.wbsEditor.remove":"移除","project.wbsEditor.refresh":"刷新计划","project.wbsEditor.querying":"数据正在请求中，请稍后刷新","project.wbsEditor.max":"最大化","project.wbsEditor.min":"最小化","project.wbsEditor.todayLine":"显示时间线","project.wbsEditor.increase":"增加","project.wbsEditor.closeTip":"当前有未保存的数据，是否确认关闭？","project.wbsEditor.cannotDelTip":"任务【{task}】不允许删除","project.wbsEditor.asap":"越早越好","project.wbsEditor.alap":"越晚越好","project.wbsEditor.mso":"必须开始于","project.wbsEditor.mfo":"必须完成于","project.wbsEditor.snet":"不得早于...开始","project.wbsEditor.fnet":"不得早于...完成","project.wbsEditor.snlt":"不得晚于...开始","project.wbsEditor.fnlt":"不得晚于...完成","project.wbsEditor.fineTuning":"微调计划","project.wbsEditor.edit":"编辑计划","project.wbsEditor.decomposing":"分解计划","project.wbsEditor.canNotEdit":"审核中或已完成的任务不允许编辑、添加子任务","project.wbsEditor.canNotUpdate":"审核中或已完成的任务不允许编辑","project.wbsEditor.jumpCanNotUpdate":"审核中或已完成的任务不允许编辑,已自动跳过","project.wbsEditor.mustSelectHR":"微调计划下新增或编辑任务必须有人力资源","project.wbsEditor.fineTuningTaskStatusTip":"微调模式下当前动作不允许操作已提报或完成的任务","project.wbsEditor.readOnlyTaskStatusTip":"任务【{text}】为只读任务，请先取消此任务，在进行相关操作","project.wbsEditor.readOnlyNotEdit":"任务【{text}】为只读任务，不允许进行相关操作","project.wbsEditor.pause":"暂停","project.wbsEditor.terminated":"已终止","project.wbsEditor.reported":"已提报","project.wbsEditor.finished":"已完成","project.wbsEditor.inPause":"暂停中","project.wbsEditor.taskName":"任务名称","project.wbsEditor.inputTaskName":"请输入任务名称","project.wbsEditor.inputDuration":"请输入工期","project.wbsEditor.taskStatus":"任务状态","project.wbsEditor.selectTaskStatus":"请选择任务状态","project.wbsEditor.criticalPath":"关键路径","project.wbsEditor.isCriticalPath":"是否关键路径","project.wbsEditor.milestone":"里程碑","project.wbsEditor.isMilestone":"是否里程碑","project.wbsEditor.resourceName":"资源名称","project.wbsEditor.inputResourceName":"请输入资源名称","project.wbsEditor.reset":"重置","project.wbsEditor.query":"查询","project.wbsEditor.durationCannotNegative":"工期筛选范围不能为负数","project.wbsEditor.yes":"是","project.wbsEditor.no":"否","project.wbsEditor.filter":"筛选","project.wbsEditor.filterPlan":"筛选计划","project.wbsEditor.OccupancyRatio":"占用比例","project.wbsEditor.operation":"操作","project.wbsEditor.operationConfirm":"操作确认","project.wbsEditor.input":"请输入","project.wbsEditor.select":"请选择","project.wbsEditor.taskResource":"资源名称","project.wbsEditor.taskResource.resourceList":"任务资源列表","project.wbsEditor.taskResource.projectRole":"项目角色","project.wbsEditor.taskResource.HumanResource":"人力资源","project.wbsEditor.taskResource.EquipmentResource":"设备资源","project.wbsEditor.taskResource.MaterialResource":"材料资源","project.wbsEditor.taskResource.resourceRatioTip":"任务资源占比必须为1-100的整数","project.wbsEditor.taskResource.index":"序号","project.wbsEditor.taskResource.resourceType":"资源类型","project.wbsEditor.taskResource.isMainResource":"是否主资源","project.wbsEditor.taskResource.ResourceTip":"请正确填写任务资源","project.wbsEditor.task.addTask":"添加任务","project.wbsEditor.task.editTask":"编辑任务","project.wbsEditor.task.SchedulingConflict":"该操作导致大纲号为{wbs}的摘要任务{text}排程发生冲突,此摘要任务的 {type} 限制使得它与它的一个子任务相冲突，是否去除摘要任务的时间限制？","project.wbsEditor.task.nameLengthTip":"任务名称不能大于60个字符","project.wbsEditor.task.selectStartTime":"请选择开始时间","project.wbsEditor.task.selectEndTime":"请选择完成时间","project.wbsEditor.task.timeSelectTip":"完成时间不能早于开始时间","project.wbsEditor.task.inputDuration":"请填写工期","project.wbsEditor.task.constraintDate":"限制时间","project.wbsEditor.task.selectConstraintDate":"请选择限制时间","project.wbsEditor.task.constraintType":"限制类型","project.wbsEditor.task.selectConstraintType":"请选择限制类型","project.wbsEditor.task.constraintDatevalidateFail":"限制时间导致任务的开始时间早于项目开始时间","project.wbsEditor.task.baseInfo":"基本信息","project.wbsEditor.task.taskMode":"任务模式","project.wbsEditor.task.predecessor":"前置任务","project.wbsEditor.predecessor.predecessorList":"前置任务列表","project.wbsEditor.task.predecessor.taskName":"任务名称","project.wbsEditor.task.predecessor.constraintType":"链接类型","project.wbsEditor.task.predecessor.lag":"间隔时间(天)","project.wbsEditor.task.predecessor.finishToStart":"完成-开始(FS)","project.wbsEditor.task.predecessor.startToStart":"开始-开始(SS)","project.wbsEditor.task.predecessor.finishToFinish":"完成-完成(FF)","project.wbsEditor.task.predecessor.startToFinish":"开始-完成(SF)","project.wbsEditor.taskPredecessor.requireTip":"请选择前置任务名称","project.wbsEditor.task.AutoMode":"自动","project.wbsEditor.task.manualMode":"手动","project.wbsEditor.task.taskRemark":"任务备注","project.wbsEditor.task.inputTaskRemark":"请输入任务备注","project.wbsEditor.task.taskResource":"任务资源","project.wbsEditor.task.batchDeleteTip":"请先选中要删除的数据","project.wbsEditor.setProjectStartTime":"设置项目开始时间","project.wbsEditor.projectStartTime":"项目开始时间","project.wbsEditor.search.searchContent":"查找内容","project.wbsEditor.search.searchContentTip":"请输入查找内容(支持回车查找)","project.wbsEditor.search.replaceTo":"替换为","project.wbsEditor.search.replaceToTip":"请输入替换内容","project.wbsEditor.search.searchColumn":"查找列","project.wbsEditor.search.matchCase":"区分大小写","project.wbsEditor.search.search":"查找","project.wbsEditor.search.replace":"替换","project.wbsEditor.search.replaceAll":"全部替换","project.wbsEditor.search.cancel":"取消","project.wbsEditor.search.prev":"上一个","project.wbsEditor.search.next":"下一个","project.wbsEditor.resourceLoad.resourceLoad":"资源负荷","project.wbsEditor.resourceLoad.timeRange":"时间范围","project.wbsEditor.resourceLoad.resource":"资源","project.wbsEditor.resourceLoad.selectResource":"请选择资源","project.wbsEditor.resourceLoad.selectResourceTip":"请输入关键字搜索相关资源","project.wbsEditor.task.selectPredecessor":"请输入关键字搜索前置任务","project.wbsEditor.resource.selectResource":"请输入关键字搜索资源","project.wbsEditor.projectTeam.projectTeam":"项目团队","project.wbsEditor.projectTeam.teamList":"团队列表","project.wbsEditor.projectTeam.selectUserFirst":"请先选中人员","project.wbsEditor.projectTeam.cannotRemoveRole":"角色已被引用，无法移除","project.wbsEditor.projectTeam.cannotRemoveMember":"成员已被引用，无法移除","project.wbsEditor.projectTeam.confirmRemove":"确定移除？","project.wbsEditor.projectTeam.confirmRemoveRoleWithMember":"该团队角色下存在成员，将一并移除，是否要移除？","project.wbsEditor.projectTeam.confirmRemoveRole":"是否要移除该团队角色？","project.wbsEditor.projectTeam.cannotRemoveBecauseMember":"已有成员被指派任务，不能移除！","project.wbsEditor.projectTeam.addTeamRole":"添加团队角色","project.wbsEditor.projectTeam.role":"角色","project.wbsEditor.projectTeam.rightRoleDataEmpty":"右侧角色数据为空！","project.wbsEditor.projectTeam.inputSearchContent":"请输入搜索内容","project.wbsEditor.projectTeam.item":"项","project.wbsEditor.projectTeam.waitForSelection":"待选","project.wbsEditor.projectTeam.selected":"已选","project.wbsEditor.periodicTask.addPeriodicTask":"添加周期任务","project.wbsEditor.periodicTask.updatePeriodicTask":"编辑周期任务","project.wbsEditor.periodicTask.week.sunday":"周日","project.wbsEditor.periodicTask.week.monday":"周一","project.wbsEditor.periodicTask.week.tuesday":"周二","project.wbsEditor.periodicTask.week.wednesday":"周三","project.wbsEditor.periodicTask.week.thursday":"周四","project.wbsEditor.periodicTask.week.friday":"周五","project.wbsEditor.periodicTask.week.saturday":"周六","project.wbsEditor.periodicTask.oneweek":"一周","project.wbsEditor.periodicTask.twoweek":"二周","project.wbsEditor.periodicTask.threeweek":"三周","project.wbsEditor.periodicTask.fourweek":"四周","project.wbsEditor.periodicTask.lastweek":"最后一周","project.wbsEditor.periodicTask.month.one":"一月","project.wbsEditor.periodicTask.month.two":"二月","project.wbsEditor.periodicTask.month.three":"三月","project.wbsEditor.periodicTask.month.four":"四月","project.wbsEditor.periodicTask.month.five":"五月","project.wbsEditor.periodicTask.month.six":"六月","project.wbsEditor.periodicTask.month.seven":"七月","project.wbsEditor.periodicTask.month.eight":"八月","project.wbsEditor.periodicTask.month.nine":"九月","project.wbsEditor.periodicTask.month.ten":"十月","project.wbsEditor.periodicTask.month.eleven":"十一月","project.wbsEditor.periodicTask.month.twelve":"十二月","project.wbsEditor.periodicTask.order.one":"第一个","project.wbsEditor.periodicTask.order.two":"第二个","project.wbsEditor.periodicTask.order.three":"第三个","project.wbsEditor.periodicTask.order.four":"第四个","project.wbsEditor.periodicTask.order.last":"最后一个","project.wbsEditor.periodicTask.selectTime":"请选择时间","project.wbsEditor.periodicTask.day":"每天","project.wbsEditor.periodicTask.week":"每周","project.wbsEditor.periodicTask.month":"每月","project.wbsEditor.periodicTask.year":"每年","project.wbsEditor.workday":"工作日","project.wbsEditor.repeat":"重复间隔为","project.wbsEditor.weekLater":"周后的","project.wbsEditor.everyMonth":"个月的第","project.wbsEditor.day":"天","project.wbsEditor.every":"每","project.wbsEditor.at":"在","project.wbsEditor.everyYear":"每年","project.wbsEditor.monthAt":"月的","project.wbsEditor.freeze":"锁定列","project.wbsEditor.showColumns":"显示配置列","project.wbsEditor.cannotHiddeAll":"不可将所有列都隐藏","project.wbsEditor.menu.ShowAll":"显示全部","project.wbsEditor.menu.Import":"导入","project.wbsEditor.menu.ImportTaskTemplate":"任务模板导入","project.wbsEditor.menu.ImportPlanTemplate":"计划模板导入","project.wbsEditor.menu.Resolve":"分解","project.wbsEditor.menu.AuthorResolve":"授权分解","project.wbsEditor.menu.Resolved":"分解完成","project.wbsEditor.menu.Release":"授权发布","project.wbsEditor.menu.ResourceLoad":"资源负荷","project.wbsEditor.menu.TaskInfo":"任务交付物","project.wbsEditor.menu.insertTask":"插入任务","project.wbsEditor.menu.insertSubtask":"插入子任务","project.wbsEditor.menu.MilestoneTask":"里程碑任务","project.wbsEditor.menu.PeriodicTask":"周期任务","project.wbsEditor.menu.Upgrade":"任务升级","project.wbsEditor.menu.demotion":"任务降级","project.wbsEditor.menu.TaskLink":"任务链接","project.wbsEditor.menu.CancelLink":"取消链接","project.wbsEditor.menu.DeleteTask":"删除任务","project.wbsEditor.menu.TaskAttributes":"任务属性","project.wbsEditor.menu.Project":"项目","project.wbsEditor.menu.ProjectCalendar":"项目日历","project.wbsEditor.menu.ProjectTeam":"项目团队","project.wbsEditor.menu.ProjectSchedule":"项目时间","project.wbsEditor.menu.View":"视图","project.wbsEditor.menu.showLevelone":"显示一级","project.wbsEditor.menu.showLeveltwo":"显示二级","project.wbsEditor.menu.showLevelthree":"显示三级","project.wbsEditor.menu.collapseAll":"全部收起","project.wbsEditor.menu.showChart":"显示甘特图","project.wbsEditor.menu.hideChart":"关闭甘特图","project.wbsEditor.menu.Zoom":"层级缩放","project.wbsEditor.menu.hourZoom":"小时视图","project.wbsEditor.menu.dayZoom":"天视图","project.wbsEditor.menu.weekZoom":"周视图","project.wbsEditor.menu.monthZoom":"月度视图","project.wbsEditor.menu.quarterZoom":"季度视图","project.wbsEditor.menu.yearZoom":"年度视图","project.wbsEditor.menu.Copy":"复制","project.wbsEditor.menu.Cut":"剪切","project.wbsEditor.menu.Undo":"撤销","project.wbsEditor.menu.Paste":"粘贴","project.wbsEditor.menu.Restore":"恢复","project.wbsEditor.menu.Search":"查找","project.wbsEditor.menu.Filter":"筛选","project.wbsEditor.menu.showConfig":"配置列","project.wbsEditor.menu.logOut":"退出编辑","project.wbsEditor.menu.fullScreen":"全屏显示","project.wbsEditor.menu.exitFullScreen":"退出全屏","project.wbsEditor.menu.CancelFreezeColumn":"取消锁定","project.wbsEditor.menu.FreezeColumn":"锁定列","project.wbsEditor.menu.showPath":"显示关键路径","project.wbsEditor.menu.hidePath":"隐藏关键路径","project.wbsEditor.menu.InsertOtherTask":"插入操作","project.wbsEditor.menu.InsertValveTask":"插入阀门任务","project.wbsEditor.menu.InstertStageTask":"插入阶段任务","project.wbsEditor.menu.InsertPeriodicTask":"插入周期任务","project.wbsEditor.menu.InsertMilestoneTask":"插入里程碑任务","project.wbsEditor.menu.updateResource":"更新资源","project.wbsEditor.batchUpdateReource":"更新计划资源","project.wbsEditor.menu.About":"关于","project.wbsEditor.HR":"人力资源","project.wbsEditor.DR":"设备资源","project.wbsEditor.MR":"材料资源","project.wbsEditor.saveFreezeColumn":"固定此列会超出可视区域?","project.wbsEditor.onlyMainResourceTip":"(当人力资源无主资源时会取第一个作为主资源)","project.wbsEditor.decomposeMode":"分解模式下根任务不允许编辑","project.wbs.checkProjectStart":"根任务的开始时间和项目开始时间({text})不一致，请调整之后再保存","project.wbsEditor.fineTuningCanNotMileTask":"微调模式不允许更改里程碑任务","project.wbs.checkMileStoneUpdate":"里程碑:【{text}】任务时间发生变化，原开始时间为【{start}】，不允许保存","project.wbsEditor.parentTaskLinkError":"父任务【{text}】任务连接非法","project.wbsEditor.parentTaskLinkErrorTip":"添加子任务会使父任务任务链接存在非FS和SS的情况, 继续添加会删除父任务非法链接, 是否继续?","project.wbsEditor.decomposeNotEdit":"分解模式下根任务不允许编辑","project.wbsEditor.task.durationCannotExceed":"工期不能超过3650天","project.wbsEditor.task.endDateCannotExceed":"选择的完成时间导致工期超过3650天","project.wbsEditor.circular":"添加的连接【{text}】会形成环,禁止添加"};function je(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Q(e)}const $=D({name:"SearchForm",props:{isReplace:{type:Boolean,default:!1},columns:{type:Array,default:()=>[]},formStates:{type:Object,default:()=>({})},searchDropdown:{type:Object,default:()=>({})}},emits:["searchByPressEnter"],setup(e,{emit:l}){const{t:r}=_(),d=le(e,"formStates"),c=e.columns.map(p=>({...p,label:(p==null?void 0:p.label_back)??(p==null?void 0:p.label)})).filter(p=>p&&p.name===e.searchDropdown.activeSearchKey),a=()=>{d.value.matchCase=!d.value.matchCase},n=()=>{e.isReplace||l("searchByPressEnter")};return()=>{let p;return t(V,{value:d.value,"onUpdate:value":s=>d.value=s,layout:"vertical"},{default:()=>[t(x,null,{default:()=>[t(g,{span:24},{default:()=>[t(T,{label:r("project.wbsEditor.search.searchContent"),name:"searchContent"},{default:()=>[t(A,{value:d.value.searchContent,"onUpdate:value":s=>d.value.searchContent=s,maxLength:40,placeholder:r("project.wbsEditor.search.searchContentTip"),autocomplete:"off",onPressEnter:n},null)]})]})]}),e.isReplace&&t(x,null,{default:()=>[t(g,{span:24},{default:()=>[t(T,{label:r("project.wbsEditor.search.replaceTo"),name:"replaceContent"},{default:()=>[t(A,{value:d.value.replaceContent,"onUpdate:value":s=>d.value.replaceContent=s,placeholder:r("project.wbsEditor.search.replaceToTip")},null)]})]})]}),t(x,null,{default:()=>[t(g,{span:12},{default:()=>[t(T,{label:r("project.wbsEditor.search.searchColumn"),name:"searchColumn"},{default:()=>[t(M,{value:d.value.searchColumn,"onUpdate:value":s=>d.value.searchColumn=s,options:c,fieldNames:{label:"label",value:"name"}},null)]})]}),t(g,{span:10,offset:1},{default:()=>[t(T,{label:" ",name:"matchCase"},{default:()=>[t(se,{checked:d.value.matchCase,"onUpdate:checked":s=>d.value.matchCase=s,onClick:a},je(p=r("project.wbsEditor.search.matchCase"))?p:{default:()=>[p]})]})]})]})]})}}}),Ee=D({name:"SearchContent",props:{columns:{type:Array,default:()=>[]},searchFlag:{type:Boolean,default:!0},replaceFlag:{type:Boolean,default:!0},searchDropdown:{type:Object,default:()=>({})},searchResultStatus:{type:Object,default:()=>({})}},emits:["searchTaskCell","show","replaceSearchCell","replaceAllSearchCell"],setup(e,{emit:l}){const{t:r}=_(),d=v(),c=v(),a=U({searchContent:"",searchColumn:e.searchDropdown.activeSearchKey||"text",replaceContent:"",matchCase:!1}),n=v("search"),p=(j=!1)=>{l("searchTaskCell",a,j)},s=[{text:r("project.wbsEditor.search.cancel"),method:()=>l("show",!1)},{text:r("project.wbsEditor.search.prev"),method:()=>p(!0)},{text:r("project.wbsEditor.search.next"),method:()=>p(!1)}],C=[...s,{text:r("project.wbsEditor.search.replace"),method:()=>l("replaceSearchCell",a)},{text:r("project.wbsEditor.search.replaceAll"),method:()=>l("replaceAllSearchCell",a)}],m=pe(()=>n.value==="search"?s:C);return X(()=>a.searchContent,()=>{n.value==="search"&&(e.searchResultStatus.taskIndex=0)}),()=>t("div",{class:"search-form-container"},[t(ae,{activeKey:n.value,"onUpdate:activeKey":j=>n.value=j},{default:()=>[e.searchFlag&&t(z,{key:"search",tab:r("project.wbsEditor.search.search")},{default:()=>[t($,{ref:d,columns:e.columns,formStates:a,searchDropdown:e.searchDropdown,onSearchByPressEnter:p},null)]}),e.replaceFlag&&t(z,{key:"replace",tab:r("project.wbsEditor.search.replace")},{default:()=>[t($,{ref:c,columns:e.columns,formStates:a,searchDropdown:e.searchDropdown,isReplace:!0},null)]})]}),t("div",{class:"search-form-handle"},[t("div",{class:"search-form-display"},[n.value==="search"&&a.searchContent&&e.searchResultStatus.taskIndex!==0&&e.searchResultStatus.taskCount!==0&&t("span",null,[t("label",{class:"search-form-display-text"},[e.searchResultStatus.taskIndex]),t("label",null,[J(" / "),e.searchResultStatus.taskCount])])]),t("div",{class:"search-form-btn"},[t(Y,null,{default:()=>[m.value.length>0&&m.value.map((j,S)=>t(I,{key:S,type:S===m.value.length-1?"primary":"default",onClick:j.method},{default:()=>[j.text]}))]})])])])}}),Pe=D({name:"Search",props:{columns:{type:Array,default:()=>[]},searchFlag:{type:Boolean,default:!0},replaceFlag:{type:Boolean,default:!0},searchDropdown:{type:Object,default:()=>({activeSearchKey:"text"})},searchResultStatus:{type:Object,default:()=>({})}},emits:["searchTaskCell","resetSearchCell","replaceSearchCell","replaceAllSearchCell"],setup(e,{emit:l,expose:r}){const{t:d}=_(),c=v(!1),a=(n=!0)=>{c.value=!!n};return X(c,()=>{!c.value&&l("resetSearchCell")}),r({show:a}),()=>t(ie,{visible:c.value,"onUpdate:visible":n=>c.value=n,title:d("project.wbsEditor.search.search"),centered:!0,isDrag:!0,maskClosable:!1,footer:null,width:560,mask:!1,wrapClassName:"wbs-search-modal",destroyOnClose:!0},{default:()=>[t(Ee,{columns:e.columns,searchFlag:e.searchFlag,replaceFlag:e.replaceFlag,onShow:a,searchDropdown:e.searchDropdown,searchResultStatus:e.searchResultStatus,onSearchTaskCell:(n,p)=>l("searchTaskCell",n,p),onReplaceSearchCell:n=>l("replaceSearchCell",n),onReplaceAllSearchCell:n=>l("replaceAllSearchCell",n)},null)]})}}),De=(e,l,r)=>{const d={searchContent:"",searchColumn:"",matchCase:!1};let c=[];const a={taskIndex:-1,taskId:null},n=U({taskIndex:0,taskCount:0}),p=()=>{var o;a.taskIndex=-1,a.taskId=null,d.searchContent="",d.searchColumn="",d.matchCase=!1,(o=e==null?void 0:e.value)==null||o.refreshData(),n.taskIndex=0,n.taskCount=0},s=(o,i=!1)=>{var u,E;c.length?(i?a.taskIndex>0?a.taskIndex--:a.taskIndex=c.length-1:a.taskIndex===c.length-1?a.taskIndex=0:a.taskIndex++,n.taskIndex=a.taskIndex+1,a.taskId=c[a.taskIndex].id,(u=e==null?void 0:e.value)==null||u.refreshData(),(E=e==null?void 0:e.value)==null||E.showTask(a.taskId),setTimeout(()=>{const f=document.querySelector(`#${l.getBaseGanttId()} .gantt_grid`),w=f.clientWidth,k=f.scrollLeft,h=document.querySelector(`[task_id=${a.taskId}]`).querySelector("[data-column-name=text]"),F=h!=null&&h.offsetWidth?h==null?void 0:h.offsetWidth:0,N=h!=null&&h.offsetLeft?h==null?void 0:h.offsetLeft:0,te=document.querySelector(".gridScroll_cell .gantt_hor_scroll");(k>N||N+F>w)&&(f.scrollLeft=N,te.scrollLeft=N)})):p()},C=o=>{var i;return(i=e==null?void 0:e.value)==null?void 0:i.getTaskBy(u=>o.matchCase?u[o.searchColumn].indexOf(o.searchContent)>-1:u[o.searchColumn].toLowerCase().indexOf(o.searchContent.toLowerCase())>-1)},m=o=>o.searchContent!==d.searchContent||o.searchColumn!==d.searchColumn||o.matchCase!==d.matchCase,j=(o,i=!1)=>{if(!o.searchContent){P(r("project.wbsEditor.searchParamsCannotEmpty"));return}if(m(o)){if(p(),c=C(o),!c.length){P(r("project.wbsEditor.noMatchingContent"));return}d.searchContent=o.searchContent,d.searchColumn=o.searchColumn,d.matchCase=o.matchCase,n.taskCount=c.length}c.length&&(l.freezeBaseGanttColumns(-1),s(o,i))};return{activeSearchCell:a,searchResultStatus:n,searchTaskCell:j,resetSearchCell:p,replaceSearchCell:o=>{var i;if(m(o))j(o);else if(c.length){const u=c[a.taskIndex].text.replaceAll(new RegExp(o.searchContent,"gi"),o.replaceContent);u?!c[a.taskIndex][W]&&q.includes(c[a.taskIndex].task_status)?P(r("project.wbsEditor.canNotUpdate")):(c[a.taskIndex].text=u,(i=e==null?void 0:e.value)==null||i.updateTask(a.taskId,c[a.taskIndex]),c.splice(a.taskIndex,1),a.taskIndex--):P(r("project.wbsEditor.taskNameCannotEmpty")),s()}},replaceAllSearchCell:o=>{if(c=C(o),c.length){let i=0;c.forEach(u=>{var E;if(!u[W]&&q.includes(u.task_status))P(r("project.wbsEditor.jumpCanNotUpdate"));else{const f=u.text.replaceAll(new RegExp(o.searchContent,"gi"),o.replaceContent);f&&(u.text=f,(E=e==null?void 0:e.value)==null||E.updateTask(u.id,u),i++)}}),P(r("project.wbsEditor.replaceNum",{replaceNum:i}),"info"),p()}else P(r("project.wbsEditor.noItemToReplace"))}}},ee=D({name:"BaseTitle",props:{title:{type:String,required:!1},fontSize:{type:String,required:!1,default:"16px"}},setup(e,{slots:l}){return()=>t("div",{class:"base-title"},[t("div",{class:"base-title-left"},[l.default?l.default():t("span",{style:{"font-size":e.fontSize}},[e.title])]),t("div",{class:"base-title-right"},[l.titleRight&&l.titleRight()])])}}),_e=D({name:"ColumnsFreeze",props:{ganttHeightWidth:{type:Object,default:()=>({})}},emits:["freezeColumn"],setup(e,{emit:l,expose:r}){const{t:d}=_(),c=v([]),a=v(!1),n=v(!1);let p=-1;const s=v(-1),C=o=>{var i,u;if(c.value=o.filter(E=>!E.hide),a.value=!0,(i=e.ganttHeightWidth)!=null&&i.width&&((u=e.ganttHeightWidth)==null?void 0:u.width)>0){let E=0;c.value.forEach((f,w)=>{var k;E<=((k=e.ganttHeightWidth)==null?void 0:k.width)&&(E+=parseInt(f.width),s.value=w)})}},m=()=>{a.value=!1},j=o=>{var i,u;if((i=e.ganttHeightWidth)!=null&&i.width&&((u=e.ganttHeightWidth)==null?void 0:u.width)>0){let E=0;c.value.forEach((f,w)=>{w<=o&&(E+=parseInt(f.width))}),E>=e.ganttHeightWidth.width?(n.value=!0,p=o):(l("freezeColumn",o),m())}else l("freezeColumn",o),m()},S=()=>{n.value=!1,l("freezeColumn",p),m()},b=()=>{n.value=!1};return r({visible:a,openDrawer:C}),()=>a.value&&t(G,{placement:"right",closable:!1,visible:a.value,"get-container":!1,width:300,style:{position:"absolute"},wrapClassName:"filter-drawer",onClose:m},{default:()=>{var o;return[t("div",{class:"freeze-column-container"},[c.value.length>0&&((o=c.value)==null?void 0:o.map((i,u)=>t("div",{key:u,class:"column-item",onClick:()=>{j(u)}},[t(ce,{title:d("project.wbsEditor.saveFreezeColumn"),open:n.value,disabled:u<s.value,"ok-text":d("project.wbsEditor.confirm"),"cancel-text":d("project.wbsEditor.search.cancel"),onConfirm:S,onCancel:b},{default:()=>[t("span",null,[(i==null?void 0:i.label_back)??i.label])]}),i._freeze&&t(L,{name:"hoteam-topping",size:17,color:"#3979f9",class:"drawer-column-freeze-icon"},null)])))])]},title:()=>t(ee,{class:"filter-base-title"},{default:()=>d("project.wbsEditor.freeze"),titleRight:()=>t(L,{name:"hoteam-close",size:24,color:"currentColor",class:"drawer-close-button",onClick:m},null)})})}}),xe=e=>e&&(O.isDayjs(e)?e.toDate():new Date(e)),K=(e,l,r)=>{const d=e.ext.formatters.durationFormatter({store:"minute",format:"day",hoursPerDay:r});return parseFloat(d.format(l))},Fe=e=>(l,r,d)=>{e.getTask(l)[r]=d,e.updateTask(l)},Ne=e=>e?O(e):O(),Me=(e,l)=>{let r="";if(l!=null&&l.length){const d=[];e==null||e.forEach(c=>{const a=l==null?void 0:l.find(n=>n.id===c.resource);if(a){let n=a.name;Number(c.proportion)!==100&&(n+=`[${c.proportion}%]`),c.isMainResource?d.unshift(n):d.push(n)}}),r=d.join(";")}return r};function Z(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Q(e)}const me=D({name:"FilterForm",props:{durationFormatterObj:{type:Object,default:()=>({})},filterParams:{type:Object,default:()=>({})},specialHandleFilterParams:{type:Array,default:()=>[]}},setup(e,{emit:l}){const{t:r}=_(),d=[{label:r("project.wbsEditor.yes"),value:1},{label:r("project.wbsEditor.no"),value:0}],c=[{value:y.TASKNEW,label:r("project.wbs.new")},{value:y.TASKWAITRESOLVE,label:r("project.wbs.toberesolved")},{value:y.TASKRESOLVING,label:r("project.wbs.resolving")},{value:y.TASKRESOLVED,label:r("project.wbs.resolved")},{value:y.TASKWAITSTART,label:r("project.wbs.unstart")},{value:y.TASKEXCUTE,label:r("project.wbs.executing")},{value:y.TASKAPPROVE,label:r("project.wbs.approving")},{value:y.TASKFINISHED,label:r("project.wbs.finished")},{value:y.TASKPAUSE,label:r("project.wbs.pause")},{value:y.TASKSTOP,label:r("project.wbs.terminated")}],a=ue(be),n=v(),p=()=>document.body,s=U(de(e.filterParams)),C=()=>{const b=s.duration_day_end,o=s.duration_day_start;return b!==null&&o!==null&&s.duration_day_end<s.duration_day_start?(P(r("project.wbsEditor.durationCannotNegative")),!1):!0},m=()=>{const b=[];return Object.keys(s).forEach(o=>{var i,u,E,f;if(![null,void 0,""].includes(s[o]))switch(o){case"text":b.push({key:o,value:s[o],operation:"like"});break;case"duration_day_start":b.push({key:"duration",value:s[o],operation:(w,k)=>K(a.value,w.duration,e.durationFormatterObj.hoursPerDay)>=k});break;case"duration_day_end":b.push({key:"duration",value:s[o],operation:(w,k)=>K(a.value,w.duration,e.durationFormatterObj.hoursPerDay)<=k});break;case"start_date":if(!s[o][0])break;b.push({key:o,value:new Date(s[o][0]),operation:">="},{key:o,value:new Date(s[o][1]),operation:"<="});break;case"end_date":if(!s[o][0])break;b.push({key:o,value:new Date(s[o][0]),operation:">="},{key:o,value:new Date(s[o][1]),operation:"<="});break;case"task_status":((i=e.specialHandleFilterParams)==null?void 0:i.length)>0?e.specialHandleFilterParams.findIndex(w=>(w==null?void 0:w.initFilterName)==="task_status")>-1&&b.push({key:(u=e.specialHandleFilterParams.find(w=>(w==null?void 0:w.initFilterName)==="task_status"))==null?void 0:u.currentFilterName,value:s[o],operation:"="}):b.push({key:o,value:s[o],operation:"="});break;case"critical_path":b.push({key:o,value:s[o],operation:(w,k)=>{var h,F;const R=(F=a.value)==null?void 0:F.isCriticalTask((h=a.value)==null?void 0:h.getTask(w.id));return k===0?!R:k?R:!0}});break;case"is_milestone":b.push({key:o,value:s[o],operation:(w,k)=>{const R=w.type;return k===0?R!=="milestone":k?R==="milestone":!0}});break;case"task_resource":((E=e.specialHandleFilterParams)==null?void 0:E.length)>0?e.specialHandleFilterParams.findIndex(w=>(w==null?void 0:w.initFilterName)==="task_resource")>-1&&b.push({key:(f=e.specialHandleFilterParams.find(w=>(w==null?void 0:w.initFilterName)==="task_resource"))==null?void 0:f.currentFilterName,value:s.task_resource,operation:"like"}):b.push({key:"task_resource",value:s.task_resource,operation:"like"});break}}),b},j=()=>{C()&&l("filter",m(),s)},S=()=>{n.value.resetFields(),l("filter",[])};return()=>{let b,o;return t("div",{class:"task-filter-container"},[t("div",{class:"task-filter-content"},[t(V,{ref:n,class:"filter-form",layout:"vertical",model:s,name:"taskFilter",autocomplete:"off"},{default:()=>[t(T,{name:"text",label:r("project.wbsEditor.taskName")},{default:()=>[t(A,{value:s.text,"onUpdate:value":i=>s.text=i,placeholder:r("project.wbsEditor.inputTaskName")},null)]}),t(T,{name:"duration_day",label:r("project.wbsEditor.duration")},{default:()=>[t(ne,null,{default:()=>[t(x,null,{default:()=>[t(g,{span:11},{default:()=>[t(H,{value:s.duration_day_start,"onUpdate:value":i=>s.duration_day_start=i,placeholder:r("project.wbsEditor.inputDuration"),precision:2,min:0,"addon-after":r("project.wbs.day")},null)]}),t(g,{flex:1},{default:()=>[t("div",{class:"middle-symbol"},[J("-")])]}),t(g,{span:11},{default:()=>[t(H,{value:s.duration_day_end,"onUpdate:value":i=>s.duration_day_end=i,placeholder:r("project.wbsEditor.inputDuration"),precision:2,min:0,"addon-after":r("project.wbs.day")},null)]})]})]})]}),t(T,{name:"start_date",label:r("project.wbsEditor.projectStartDate")},{default:()=>[t(B,{class:"full-width",value:s.start_date,"onUpdate:value":i=>s.start_date=i,format:"YYYY-MM-DD HH:mm","show-time":!0,getPopupContainer:p,isTimeZone:!1,placeholder:[r("project.wbs.projectStartDate"),r("project.wbs.endDate")]},null)]}),t(T,{name:"end_date",label:r("project.wbsEditor.projectEndDate")},{default:()=>[t(B,{class:"full-width",value:s.end_date,"onUpdate:value":i=>s.end_date=i,format:"YYYY-MM-DD HH:mm","show-time":!0,isTimeZone:!1,getPopupContainer:p,placeholder:[r("project.wbs.projectStartDate"),r("project.wbs.endDate")]},null)]}),t(T,{name:"task_status",label:r("project.wbsEditor.taskStatus")},{default:()=>[t(M,{options:c,value:s.task_status,"onUpdate:value":i=>s.task_status=i,allowClear:!0,placeholder:r("project.wbsEditor.selectTaskStatus")},null)]}),t(T,{name:"critical_path",label:r("project.wbsEditor.criticalPath")},{default:()=>[t(M,{options:d,value:s.critical_path,"onUpdate:value":i=>s.critical_path=i,allowClear:!0,placeholder:r("project.wbsEditor.isCriticalPath")},null)]}),t(T,{name:"is_milestone",label:r("project.wbsEditor.milestone")},{default:()=>[t(M,{options:d,value:s.is_milestone,"onUpdate:value":i=>s.is_milestone=i,allowClear:!0,placeholder:r("project.wbsEditor.isMilestone")},null)]}),t(T,{name:"task_resource",label:()=>{const i=e.specialHandleFilterParams.find(u=>(u==null?void 0:u.initFilterName)==="task_resource");return i?i==null?void 0:i.currentFilterTilte:r("project.wbsEditor.taskResource")}},{default:()=>[t(A,{value:s.task_resource,"onUpdate:value":i=>s.task_resource=i,placeholder:r("project.wbsEditor.inputResourceName")},null)]})]})]),t(x,{justify:"end"},{default:()=>[t(Y,null,{default:()=>[t(g,null,{default:()=>[t(I,{onClick:S},Z(b=r("project.wbsEditor.reset"))?b:{default:()=>[b]})]}),t(g,null,{default:()=>[t(I,{type:"primary",onClick:j},Z(o=r("project.wbsEditor.query"))?o:{default:()=>[o]})]})]})]})])}}}),Ae=D({name:"FilterDrawer",props:{durationFormatterObj:{type:Object,default:()=>({})},specialHandleFilterParams:{type:Array,default:()=>[]}},emits:["filter"],setup(e,{emit:l,expose:r}){const{t:d}=_(),c=v(!1),a=v(),n=v({text:"",duration_day_start:null,duration_day_end:null,start_date:[],end_date:[],task_status:null,critical_path:null,is_milestone:null,task_resource:""}),p=()=>{c.value=!0},s=()=>{c.value=!1},C=(j,S)=>{n.value=S,l("filter",j)};return r({visible:c,openDrawer:p,resetFilter:()=>{var j;(j=a.value)==null||j.resetFields(),n.value=void 0}}),()=>t(G,{placement:"right",closable:!1,visible:c.value,"get-container":!1,width:300,style:{position:"absolute"},onClose:s},{default:()=>[t(me,{ref:a,filterParams:n,durationFormatterObj:e.durationFormatterObj,specialHandleFilterParams:e.specialHandleFilterParams,onFilter:C},null)],title:()=>t(ee,{class:"filter-base-title"},{default:()=>d("project.wbsEditor.filter"),titleRight:()=>t(L,{name:"hoteam-close",size:24,color:"currentColor",class:"drawer-close-button",onClick:s},null)})})}});export{ee as B,_e as C,Ae as F,Pe as S,be as a,ye as b,Fe as c,Ce as d,ge as e,Se as f,Me as g,Ne as h,Te as i,xe as j,ve as p,De as u,Re as z};
